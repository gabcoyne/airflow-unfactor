# Tool Design

We design tools that are safe, deterministic, and easy for agents to use.

## Principles

- **Single responsibility** per tool
- **Structured outputs** (JSON) for predictable parsing
- **Explicit error handling** with hints and warnings
- **Composable**: tools can be chained cleanly

## Example: convert

```json
{
  "path": "dags/my_etl.py",
  "include_comments": true,
  "generate_tests": true
}
```

**Returns**

```json
{
  "flow_code": "...",
  "test_code": "...",
  "warnings": ["Schedule not converted; use deployments"],
  "original_to_new_mapping": {"extract": "extract"},
  "dataset_conversion": {
    "events": ["dataset.s3.bucket.data"],
    "deployment_yaml": "triggers: ...",
    "materialization_code": "@materialize(\"s3://bucket/data\") ...",
    "producer_code": "..."
  },
  "conversion_runbook_md": "# Conversion Runbook: my_etl\n\n## Summary\n...\n\n## DAG Configuration\n\n**Schedule**: `@daily`\n- Configure via deployment schedule or `flow.serve(cron=...)`\n\n**Max Active Runs**: `3`\n- Configure concurrency limit in deployment settings\n\n**Retry Configuration**:\n- Retries: `3`\n- Retry delay: `300`\n- Configure via `@flow(retries=...)` and `@task(retries=...)` decorators\n\n**Tags**: `production`, `etl`\n- Add tags via `@flow(tags=[...])` decorator\n\n## Server/API Configuration Checklist\n..."
}
```

The `conversion_runbook_md` field now includes DAG-specific configuration guidance extracted from the original DAG settings, providing targeted migration instructions for schedule, concurrency, retries, tags, and callbacks.

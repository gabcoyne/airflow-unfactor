# Prefect MCP Alignment

Our MCP server aligns with **Prefect’s MCP guidance** and integrates external MCP servers for richer context.

## External MCP Servers

We use two unauthenticated MCP servers:

- **Prefect MCP**: `https://docs.prefect.io/mcp`
- **Astronomer MCP**: `https://mcpmarket.com/ja/tools/skills/airflow-2-to-3-migration`

Set optional env overrides:

```bash
export MCP_PREFECT_URL="https://docs.prefect.io/mcp"
export MCP_ASTRONOMER_URL="https://mcpmarket.com/ja/tools/skills/airflow-2-to-3-migration"
```

## Prefect MCP server profile

According to the Prefect MCP registry endpoint, the Prefect MCP server exposes a search tool with the following shape:

```json
{
  "server": {
    "name": "Prefect",
    "version": "1.0.0",
    "transport": "http"
  },
  "capabilities": {
    "tools": {
      "SearchPrefect": {
        "description": "Search across the Prefect knowledge base...",
        "inputSchema": {
          "type": "object",
          "properties": { "query": { "type": "string" } },
          "required": ["query"]
        }
      }
    }
  }
}
```

We model our tool descriptions and schemas to match this standard.

## Design goals

- **Precise schemas**: All tools publish JSON Schema for inputs
- **Clear descriptions**: Tools describe intent and when to use them
- **Deterministic output**: Structured output for downstream agents
- **Error transparency**: Conversion warnings returned inline

## Next: Tool design

See **MCP → Tool Design** for practical conventions and examples.
